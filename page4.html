<!doctype html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <title>Bootstrap + Canvas Game Demo</title>

    <!-- Bootstrap 5.3 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #212529;
            color: #fff;
        }

        canvas {
            background: #000;
            border: 3px solid #0d6efd;
            display: block;
            margin: auto;
        }

        .game-info {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

<div class="container py-4">
    <div class="row">

        <!-- å·¦å´ï¼šèªªæ˜å€ -->
        <div class="col-md-4 mb-3">
            <div class="card text-dark">
                <div class="card-body">
                    <h5 class="card-title">ğŸ¯ éŠæˆ²æ“ä½œèªªæ˜</h5>
                    <ul>
                        <li>â¬… â¡ï¼šå·¦å³ç§»å‹•</li>
                        <li>â¬† â¬‡ï¼šä¸Šä¸‹ç§»å‹•</li>
                        <li><strong>Space</strong>ï¼šç™¼å°„å­å½ˆ</li>
                    </ul>

                    <hr>

                    <p class="game-info">
                        åˆ†æ•¸ï¼š<span id="score">0</span>
                    </p>

                    <button class="btn btn-primary w-100" onclick="resetGame()">é‡æ–°é–‹å§‹</button>
                </div>
            </div>
        </div>

        <!-- å³å´ï¼šCanvas éŠæˆ²å€ -->
        <div class="col-md-8 text-center">
            <canvas id="gameCanvas" width="400" height="600"></canvas>
        </div>

    </div>
</div>

<script>
/* =============================
   Canvas & Context
============================= */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

/* =============================
   éŠæˆ²è³‡æ–™
============================= */
let score = 0;
const scoreText = document.getElementById("score");

/* =============================
   ç©å®¶
============================= */
const player = {
    x: 180,
    y: 520,
    w: 40,
    h: 40,
    speed: 6
};

let bullets = [];
let enemies = [];

/* =============================
   éµç›¤æ§åˆ¶
============================= */
const keys = {};
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

/* =============================
   ç”¢ç”Ÿæ•µäºº
============================= */
function spawnEnemy() {
    enemies.push({
        x: Math.random() * (canvas.width - 40),
        y: -40,
        w: 40,
        h: 40,
        speed: 2 + Math.random() * 2
    });
}

/* =============================
   æ›´æ–°é‚è¼¯
============================= */
function update() {
    // ç©å®¶ç§»å‹•
    if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
    if (keys["ArrowRight"] && player.x < canvas.width - player.w) player.x += player.speed;
    if (keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
    if (keys["ArrowDown"] && player.y < canvas.height - player.h) player.y += player.speed;

    // ç™¼å°„å­å½ˆ
    if (keys["Space"]) {
        bullets.push({
            x: player.x + player.w / 2 - 2,
            y: player.y,
            speed: 8
        });
        keys["Space"] = false;
    }

    // å­å½ˆç§»å‹•
    bullets.forEach(b => b.y -= b.speed);
    bullets = bullets.filter(b => b.y > 0);

    // æ•µäººç§»å‹•
    enemies.forEach(e => e.y += e.speed);
    enemies = enemies.filter(e => e.y < canvas.height);

    // ç¢°æ’åˆ¤æ–·
    bullets.forEach((b, bi) => {
        enemies.forEach((e, ei) => {
            if (
                b.x > e.x &&
                b.x < e.x + e.w &&
                b.y > e.y &&
                b.y < e.y + e.h
            ) {
                bullets.splice(bi, 1);
                enemies.splice(ei, 1);
                score++;
                scoreText.textContent = score;
            }
        });
    });
}

/* =============================
   ç¹ªåœ–
============================= */
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ç©å®¶
    ctx.fillStyle = "#0dcaf0";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // å­å½ˆ
    ctx.fillStyle = "#ffc107";
    bullets.forEach(b => ctx.fillRect(b.x, b.y, 4, 10));

    // æ•µäºº
    ctx.fillStyle = "#dc3545";
    enemies.forEach(e => ctx.fillRect(e.x, e.y, e.w, e.h));
}

/* =============================
   ä¸»è¿´åœˆ
============================= */
function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

/* =============================
   é‡ç½®éŠæˆ²
============================= */
function resetGame() {
    score = 0;
    bullets = [];
    enemies = [];
    scoreText.textContent = score;
}

/* =============================
   åˆå§‹åŒ–
============================= */
setInterval(spawnEnemy, 1000);
gameLoop();
</script>

</body>
</html>
